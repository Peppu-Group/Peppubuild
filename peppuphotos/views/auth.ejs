<html>
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
        <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.4.0/font/bootstrap-icons.css" rel="stylesheet">
        <link href="https://unpkg.com/pepputoken/dist/index.min.css" rel="stylesheet">
        <link href="./style.css" rel="stylesheet">
        <title>Peppuphotos</title>
    </head>

<body id="i1zrui">
    <a href="https://www.peppubuild.com" class="built-with-peppubuild-btn">
        Built with Peppubuild</a>
        <div class="navbar navbar-expand-lg nav-contain">
          <div class="container-fluid">
            <a href="/" class="navbar-brand"><img src="https://peppubuild.com/favicon.ico" id="ikqx0f"/></a>
            <button type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" class="navbar-toggler"><span class="navbar-toggler-icon"></span></button>
            <div class="collapse navbar-collapse">
              <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                <li class="nav-item">
                  <a aria-current="page" href="/" class="nav-link active">Home</a>
                </li>
                <li class="nav-item">
                  <a aria-current="page" href="/upload" class="nav-link">Upload</a>
                </li>
                <li class="nav-item dropdown">
                </li>
              </ul>
              <form class="d-flex">
                <a href="/login" class="btn btn-dark">Login</a>
              </form>
            </div>
          </div>
        </div>
        <div class="gjs-row" id="i15bym">
          <div class="gjs-cell" id="iiqux6">
            <div class="gjs-row" id="iqe4zj">
              <div class="gjs-cell">
                <button type="button" class="login-with-google-btn" onclick="getToken();">
                    Sign in with Google
                </button>
              </div>
            </div>
          </div>
        </div>
        <div class="d-flex justify-content-center align-items-center flex-container mar">
          <a href="https://www.linkedin.com/company/peppubooks" class="bi bi-linkedin large"></a>
          <a href="https://www.x.com/peppubuild" class="bi bi-twitter large"></a>
          <a href="https://youtube.com/@peppubuild" class="bi bi-youtube large"></a>
          <link class="bi bi-github large"/>
        </div>
        <div class="d-flex flex-column flex-sm-row justify-content-center align-items-center flex-container py-4 my-4 border-top">
          <p>Â© 2024 Peppu Ventures. All rights reserved.
          </p>
          <div class="list-unstyled d-flex">
            <li class="ms-3">
            </li>
          </div>
        </div>
    <script src="https://accounts.google.com/gsi/client" onload="initTokenClient()" async defer></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        function handleCredentialResponse(response) {
            var setAuth = new Promise((resolve, reject) => {
                // set oauth in localstorage
                resolve(localStorage.setItem('oauth', response.credential));
            });
            setAuth.then(() => {
                window.location.href = 'http://localhost:1423/upload'; //Will take you to home page.
            })
        }
        function initTokenClient() {
            tokenClient = google.accounts.oauth2.initTokenClient({
                client_id: "<%=apikey%>",
                scope: 'https://www.googleapis.com/auth/drive.file',
                callback: (response) => {
                    var setAuth = new Promise((resolve, reject) => {
                        // set oauth in localstorage
                        resolve(localStorage.setItem('oauth', response.access_token));
                        console.log(response)
                    });
                    setAuth.then(() => {
                        window.location.href = 'http://localhost:1423/upload'; //Will take you to home page.
                    })
                },
            });
        }

        function getToken() {
            // Re-entrant function to request user consent.
            // Returns an access token to the callback specified in google.accounts.oauth2.initTokenClient
            // Use a user gesture to call this function and obtain a new, valid access token
            // when the previous token expires and a 401 status code is returned by Google API calls.
            tokenClient.requestAccessToken();
        }
    </script>
      </body>
</html>